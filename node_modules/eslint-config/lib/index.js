import assign from 'object-assign';
import baseRules from './base-rules';
import reactRules from './react-rules';

export default function(isDev, task) {
  const opts = {
    isDev,
    task
  };

  function findConfig() {
    const rootPath = require('app-root-path').path;
    const configFile = 'es6-config.json';
    const moduleName = 'eslint-config';
    const prod = `${rootPath}/node_modules/@hfa/${moduleName}/dist/${configFile})`;
    const dev = `${rootPath}/lib/${configFile}`;

    return new RegExp(moduleName).test(rootPath) ? dev : prod;
  }

  return {
    rules: assign({}, baseRules(opts), reactRules(opts)),
    configFile: findConfig(),
    useEslintrc: false
  };
}
